@extends('layouts.app')

@section('content')



    <!-- Menu Section -->
    <section class="menu py-5">
        <div class="container">
            <h1 class="text-center mb-5">Our Menu</h1>

            <!-- Category: Main Course -->
            <h2 class="menu-section-title">Main</h2>
            <div class="row row-cols-1 row-cols-md-4 g-4 menu-section">
                <div class="col">
                    <div class="text-center">
                        <img src="img/burger.jpg" class="menu-img mb-3" alt="Spring Rolls">
                        <h5>Spring Rolls</h5>
                        <p>Crispy rolls with fresh vegetables</p>
                        <p class="text-danger">$3.99</p>
                        <p><input type="number" class="form-control quantity" min="0" value="0"></p>
                        <p><button class="btn btn-danger add-to-cart">Add to Cart</button></p>
                    </div>
                </div>
                <div class="col">
                    <div class="text-center">
                        <img src="img/burger.jpg" class="menu-img mb-3" alt="Spring Rolls">
                        <h5>Spring Rolls</h5>
                        <p>Crispy rolls with fresh vegetables</p>
                        <p class="text-danger">$3.99</p>
                        <p><input type="number" class="form-control quantity" min="0" value="0"></p>
                        <p><button class="btn btn-danger add-to-cart">Add to Cart</button></p>
                    </div>
                </div>
                <div class="col">
                    <div class="text-center">
                        <img src="img/burger.jpg" class="menu-img mb-3" alt="Spring Rolls">
                        <h5>Spring Rolls</h5>
                        <p>Crispy rolls with fresh vegetables</p>
                        <p class="text-danger">$3.99</p>
                        <p><input type="number" class="form-control quantity" min="0" value="0"></p>
                        <p><button class="btn btn-danger add-to-cart">Add to Cart</button></p>
                    </div>
                </div>
                <div class="col">
                    <div class="text-center">
                        <img src="img/burger.jpg" class="menu-img mb-3" alt="Spring Rolls">
                        <h5>Spring Rolls</h5>
                        <p>Crispy rolls with fresh vegetables</p>
                        <p class="text-danger">$3.99</p>
                        <p><input type="number" class="form-control quantity" min="0" value="0"></p>
                        <p><button class="btn btn-danger add-to-cart">Add to Cart</button></p>
                    </div>
                </div>
            </div>
   

            <!-- Category: Main Course -->
            <h2 class="menu-section-title">Main</h2>
            <div class="row row-cols-1 row-cols-md-4 g-4 menu-section">
                <div class="col">
                    <div class="text-center">
                        <img src="img/burger.jpg" class="menu-img mb-3" alt="Spring Rolls">
                        <h5>Spring Rolls</h5>
                        <p>Crispy rolls with fresh vegetables</p>
                        <p class="text-danger">$3.99</p>
                        <p><input type="number" class="form-control quantity" min="0" value="0"></p>
                        <p><button class="btn btn-danger add-to-cart">Add to Cart</button></p>
                    </div>
                </div>
                <div class="col">
                    <div class="text-center">
                        <img src="img/burger.jpg" class="menu-img mb-3" alt="Spring Rolls">
                        <h5>Spring Rolls</h5>
                        <p>Crispy rolls with fresh vegetables</p>
                        <p class="text-danger">$3.99</p>
                        <p><input type="number" class="form-control quantity" min="0" value="0"></p>
                        <p><button class="btn btn-danger add-to-cart">Add to Cart</button></p>
                    </div>
                </div>
                <div class="col">
                    <div class="text-center">
                        <img src="img/burger.jpg" class="menu-img mb-3" alt="Spring Rolls">
                        <h5>Spring Rolls</h5>
                        <p>Crispy rolls with fresh vegetables</p>
                        <p class="text-danger">$3.99</p>
                        <p><input type="number" class="form-control quantity" min="0" value="0"></p>
                        <p><button class="btn btn-danger add-to-cart">Add to Cart</button></p>
                    </div>
                </div>
                <div class="col">
                    <div class="text-center">
                        <img src="img/burger.jpg" class="menu-img mb-3" alt="Spring Rolls">
                        <h5>Spring Rolls</h5>
                        <p>Crispy rolls with fresh vegetables</p>
                        <p class="text-danger">$3.99</p>
                        <p><input type="number" class="form-control quantity" min="0" value="0"></p>
                        <p><button class="btn btn-danger add-to-cart">Add to Cart</button></p>
                    </div>
                </div>
            </div>

            <!-- Category: Main Course -->
            <h2 class="menu-section-title">Main</h2>
            <div class="row row-cols-1 row-cols-md-4 g-4 menu-section">
                <div class="col">
                    <div class="text-center">
                        <img src="img/burger.jpg" class="menu-img mb-3" alt="Spring Rolls">
                        <h5>Spring Rolls</h5>
                        <p>Crispy rolls with fresh vegetables</p>
                        <p class="text-danger">$3.99</p>
                        <p><input type="number" class="form-control quantity" min="0" value="0"></p>
                        <p><button class="btn btn-danger add-to-cart">Add to Cart</button></p>
                    </div>
                </div>
                <div class="col">
                    <div class="text-center">
                        <img src="img/burger.jpg" class="menu-img mb-3" alt="Spring Rolls">
                        <h5>Spring Rolls</h5>
                        <p>Crispy rolls with fresh vegetables</p>
                        <p class="text-danger">$3.99</p>
                        <p><input type="number" class="form-control quantity" min="0" value="0"></p>
                        <p><button class="btn btn-danger add-to-cart">Add to Cart</button></p>
                    </div>
                </div>
                <div class="col">
                    <div class="text-center">
                        <img src="img/burger.jpg" class="menu-img mb-3" alt="Spring Rolls">
                        <h5>Spring Rolls</h5>
                        <p>Crispy rolls with fresh vegetables</p>
                        <p class="text-danger">$3.99</p>
                        <p><input type="number" class="form-control quantity" min="0" value="0"></p>
                        <p><button class="btn btn-danger add-to-cart">Add to Cart</button></p>
                    </div>
                </div>
                <div class="col">
                    <div class="text-center">
                        <img src="img/burger.jpg" class="menu-img mb-3" alt="Spring Rolls">
                        <h5>Spring Rolls</h5>
                        <p>Crispy rolls with fresh vegetables</p>
                        <p class="text-danger">$3.99</p>
                        <p><input type="number" class="form-control quantity" min="0" value="0"></p>
                        <p><button class="btn btn-danger add-to-cart">Add to Cart</button></p>
                    </div>
                </div>
            </div>

            <!-- Category: Main Course -->
            <h2 class="menu-section-title">Main</h2>
            <div class="row row-cols-1 row-cols-md-4 g-4 menu-section">
                <div class="col">
                    <div class="text-center">
                        <img src="img/burger.jpg" class="menu-img mb-3" alt="Spring Rolls">
                        <h5>Spring Rolls</h5>
                        <p>Crispy rolls with fresh vegetables</p>
                        <p class="text-danger">$3.99</p>
                        <p><input type="number" class="form-control quantity" min="0" value="0"></p>
                        <p><button class="btn btn-danger add-to-cart">Add to Cart</button></p>
                    </div>
                </div>
                <div class="col">
                    <div class="text-center">
                        <img src="img/burger.jpg" class="menu-img mb-3" alt="Spring Rolls">
                        <h5>Spring Rolls</h5>
                        <p>Crispy rolls with fresh vegetables</p>
                        <p class="text-danger">$3.99</p>
                        <p><input type="number" class="form-control quantity" min="0" value="0"></p>
                        <p><button class="btn btn-danger add-to-cart">Add to Cart</button></p>
                    </div>
                </div>
                <div class="col">
                    <div class="text-center">
                        <img src="img/burger.jpg" class="menu-img mb-3" alt="Spring Rolls">
                        <h5>Spring Rolls</h5>
                        <p>Crispy rolls with fresh vegetables</p>
                        <p class="text-danger">$3.99</p>
                        <p><input type="number" class="form-control quantity" min="0" value="0"></p>
                        <p><button class="btn btn-danger add-to-cart">Add to Cart</button></p>
                    </div>
                </div>
                <div class="col">
                    <div class="text-center">
                        <img src="img/burger.jpg" class="menu-img mb-3" alt="Spring Rolls">
                        <h5>Spring Rolls</h5>
                        <p>Crispy rolls with fresh vegetables</p>
                        <p class="text-danger">$3.99</p>
                        <p><input type="number" class="form-control quantity" min="0" value="0"></p>
                        <p><button class="btn btn-danger add-to-cart">Add to Cart</button></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cart Modal -->
<div class="modal fade" id="cartModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <form method="POST" action="{{ route('orders.store') }}">
        @csrf
        <div class="modal-header">
          <h5 class="modal-title">Your Cart</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <table class="table">
            <thead>
              <tr>
                <th>Item</th>
                <th>Qty</th>
                <th>Price</th>
              </tr>
            </thead>
            <tbody id="cart-items"></tbody>
            <tfoot>
              <tr>
                <th colspan="2">Total</th>
                <th id="cart-total">$0.00</th>
              </tr>
            </tfoot>
          </table>

          <!-- Table ID Input -->
          <div class="mb-3">
            <label for="table_id">Table ID</label>
            <input type="text" name="table_id" class="form-control" required>
          </div>

          <!-- Hidden field to store cart data -->
          <input type="hidden" name="cart_data" id="cart-data">
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-success">Confirm Order</button>
        </div>
      </form>
    </div>
  </div>
</div>


    </section>

    @endsection

    <script src="{{ asset('js/cart.js') }}"></script>

    <script>
document.addEventListener('DOMContentLoaded', function () {
    let cart = [];

    function updateCartDisplay() {
        // Update cart icon count
        const cartCountEl = document.getElementById('cart-count');
        cartCountEl.textContent = cart.reduce((total, item) => total + item.qty, 0);

        // Update modal table body
        const cartItemsEl = document.getElementById('cart-items');
        cartItemsEl.innerHTML = ''; // Clear previous

        let total = 0;

        cart.forEach(item => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${item.name}</td>
                <td>${item.qty}</td>
                <td>$${(item.price * item.qty).toFixed(2)}</td>
            `;
            cartItemsEl.appendChild(row);

            total += item.price * item.qty;
        });

        // Update total price
        const totalEl = document.getElementById('cart-total');
        totalEl.textContent = '$' + total.toFixed(2);

        // Update hidden input for form submission
        const cartDataInput = document.getElementById('cart-data');
        cartDataInput.value = JSON.stringify(cart);
    }

    document.querySelectorAll('.add-to-cart').forEach(function (button) {
        button.addEventListener('click', function () {
            const container = button.closest('.text-center');
            const itemName = container.querySelector('h5').innerText;
            const priceText = container.querySelector('.text-danger').innerText;
            const price = parseFloat(priceText.replace('$', ''));
            const quantityInput = container.querySelector('.quantity');
            const quantity = parseInt(quantityInput.value);

            if (quantity > 0) {
                const existingItem = cart.find(item => item.name === itemName);
                if (existingItem) {
                    existingItem.qty += quantity;
                } else {
                    cart.push({ name: itemName, price: price, qty: quantity });
                }

                quantityInput.value = 0;

                updateCartDisplay();
                alert(itemName + ' added to cart!');
            } else {
                alert('Please select a valid quantity');
            }
        });
    });

    // Optional: if you want to show the modal after click on cart icon
    const cartIcon = document.getElementById('cart-icon');
    if (cartIcon) {
        cartIcon.addEventListener('click', function () {
            const modal = new bootstrap.Modal(document.getElementById('cartModal'));
            modal.show();
        });
    }
});
</script>

